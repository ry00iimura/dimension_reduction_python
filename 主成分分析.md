# 主成分分析

## これは何？
- 例えば、ユーザーの毎月のプリント枚数からユーザーの各月のランクをLight層、Medium層、Heavy層の3層に分類する。
- この時、データが12か月分、100ユーザーあれば、(L,M,H) = (1,1,10)のようなベクトルが100個できることになる。
- これを3次元の散布図にプロットすれば、データの外観が眺められるが、うまく言葉では説明できない。
- そんな時に、このプロットされた図に、「それっぽい」線を3本引いてみる。
- この引いた3本の線だけ見ると、100個のデータ点を見ずともなんとなく外観がつかめる。
- このようにデータの外観をすべてのサンプルを見ずともなんとなくわかる線が引ければ、線だけ見ればいいのでわかりやすい。
- この線を引く行為が主成分分析であり、線だけ見ればデータの外観がつかめるのが主成分分析を使う意味である。

## いつ使うねん？
- データを最初に見たとき。データの特徴をつかむために使う。

## 何がわかる？
- データがどの方向にばらついているか
- すべての変数を見ずともデータの要約を知ることができる（主成分係数Wの正負と大きさから）
- 何個の変数がどのくらいの情報量を保持しているかを知ることができる（寄与率から）。

## 言葉の確認
### 情報量
- 情報量とは分散の大きさである。例えば、アンケート調査で100人に好きな料理を聞けば、異なった回答が色々得られる。これつまり、分散（ばらつき）が大きい状態。逆に100人に明日はやってくるか？みたいな質問をしてもたいていが「はい」としか答えないはず。つまりほとんど同じ回答しかえられない。この状態はばらつきがほとんどない。以上を見てもわかる通り、情報量が多いとは分散が大きいことであり、情報量が少なければ分散も小さい。

### 固有値問題を解く
- 固有値と固有ベクトルを求めること

### 固有値と固有ベクトル
- 定義 Ax = λx (x≠0)を満たす時、λを固有値、ｘを固有ベクトルと呼ぶ。
- 通常、ベクトルXと行列Aという変換をすると、ベクトルの大きさと向きが変化する。固有ベクトルは、行列と掛け算しても、向きは変化せず、大きさだけが変化するもののことをさす（つまりXとAxが同じ方向を向いているという意味）。
- 固有値はその時、何倍の大きさに変化するかという大きさを示す値。
- この場合、行列Aの固有値、行列Aの固有ベクトルという。
- 固有ベクトルXの固有値λという
- 固有ベクトルは主成分係数Wのこと

## 因子負荷量
- 元の変数と主成分との相関を示す相関係数

### 固有値
- 主成分の分散

## 主成分の計算方法
- 1 「分散共分散行列」の固有値問題を解く
- 2 「相関行列」の固有値問題を解く

## なぜ固有値問題を解くと主成分が求められるのか？
- 引用
- なぜ固有値問題を解くと主成分が求まるのか、直感的な説明はちょっと難しいのですが、以下のような流れがあるようです。
 １：分散が最も大きくなるように線（主成分軸）を引く方法を数式であらわしてみた。
 ２：その式は、よく見ると、分散共分散行列（相関行列）に対して固有値問題を解いた時の固有ベクトルに等しいようだ

- 別の解釈
- 相関行列の固有値問題を解くとは、つまり、AとBという2つの変数（列）。例えば、国語のテストの点数、数学のテストの点数。これらの相関を求めるとは、つまりお互いがどれだけ似た傾向を持っているかを数値で示そうとしているといえる（正の相関あら、Aが上がれば、Bもあがる）。一方で主成分分析の根源は、似ている情報はまとめてしまえという発想。したがって、「相関が強いものは似た傾向をもつから、情報を圧縮しても問題ない」という発想になる。だから、相関行列の固有値問題（つまり同じ方向のベクトルだけど大きさだけが違う）を解けば主成分がわかる。

## 参考
http://i.cla.kobe-u.ac.jp/murao/class/2015-SeminarB3/05_Python_de_PCA.pdf
https://qiita.com/maskot1977/items/082557fcda78c4cdb41f
https://logics-of-blue.com/principal-components-analysis/

